/*
 * -------------------------------------------------
 *  ARCCA/nextflow-tutorial-k8s Nextflow config file
 * -------------------------------------------------
 * Default config options for all environments.
 */

manifest {
    description = 'nf003: RNAseq PE STAR'
    mainScript = 'main.nf'
}

params {

    projectDir = "/scw1162-data/projects/ARCCA/nextflow-tutorial-k8s"
    dataDir = "/scw1162-data/c.c1045890/data"

    genomeName = "Homo_sapiens.GRCh38.dna_sm.primary_assembly.fa"
    gtfName = "Homo_sapiens.GRCh38.108.gtf"

    userID = "c.c1045890"
    userProjectCode = "scw1001"

    sleepTimeStart = '0m'
    sleepTimeEnd = '0m'
    retries = '5'

    srcDir = "src"
    inputDir = "input"
    outputDir = "output"
    resourcesDir = "resources"
    releaseDir = "release"

    python3Version = "python/3.6.4"

    trimgaloreJobCpus = "4"
    genomeIndexJobCpus = "4"
    starMappingJobCpus = "4"
    markDuplicatesCpus = "4"

    picardExecutable = "/opt/picard/picard.jar"

    bamtoolsReportJobLength = "2h"

    featureCountsVersion = "subread/2.0.0-binary"
    featureCountsJobLength = "8h"
    featureCountsJobMemory = "60.G"
    featureCountsJobCpus = "2"

    featureCountsReportJobLength = "2h"
    featureCountsReportJobMemory = "40.G"

    makeReleaseJobLength = "10h"

  execution {
    queue_size = 100
    threads = 1
    max_retries = 5
    error_strategy = "retry"
  }
}

profiles {
  debug { process.beforeScript = 'echo $HOSTNAME' }
  k8s {
    singularity.enabled = false
    docker.enabled = false
    podman.enabled = false
    shifter.enabled = false
    charliecloud.enabled = false
    process.executor='k8s'
    k8s.storageClaimName = 'scw1162-data'
    k8s.storageMountPath = '/scw1162-data'
    k8s.namespace = 'nextflow'
    k8s.serviceAccount = 'nextflow-sa'
    }
  }

